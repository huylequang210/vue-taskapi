(function(e){function t(t){for(var r,c,i=t[0],s=t[1],u=t[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="vue-taskapi/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0485":function(e,t,n){},"16be":function(e,t,n){},"51fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,o,c){var i=Object(r["j"])("LoginForm"),s=Object(r["j"])("TaskForm"),u=Object(r["j"])("TaskTable");return Object(r["f"])(),Object(r["c"])("div",null,[Object(r["e"])(i,{url:o.url,onLogin:c.setLogin,onSetJwt:c.setJwt},null,8,["url","onLogin","onSetJwt"]),Object(r["e"])(s,{url:o.url,userLogin:o.userLogin,jwt:o.jwt,"onAdd:task":c.addTask},null,8,["url","userLogin","jwt","onAdd:task"]),Object(r["e"])(u,{url:o.url,"onDelete:task":c.deleteTask,"onPatch:task":c.patchTask,deleteStatus:o.deleteStatus,patchStatus:o.patchStatus,errorStatus:o.errorStatus,userLogin:o.userLogin,tasks:o.tasks},null,8,["url","onDelete:task","onPatch:task","deleteStatus","patchStatus","errorStatus","userLogin","tasks"])])}n("4de4"),n("d3b7"),n("96cf");var o=n("1da1"),c=(n("a4d3"),n("e01a"),Object(r["p"])("data-v-4a1fe7d2"));Object(r["h"])("data-v-4a1fe7d2");var i={key:0,class:"deleteMessage"},s={key:1,class:"patchMessage"},u={key:2,class:"errorMessage"},l={key:3},d={key:4},p=Object(r["e"])("tr",null,[Object(r["e"])("th",null,"Title"),Object(r["e"])("th",null,"Description"),Object(r["e"])("th",null,"Deadline"),Object(r["e"])("th",null,"Completed")],-1),b=Object(r["e"])("option",{value:"N",selected:""},"no",-1),f=Object(r["e"])("option",{value:"Y"},"yes",-1);Object(r["g"])();var j=c((function(e,t,n,a,o,c){return Object(r["f"])(),Object(r["c"])("div",null,[!0===n.deleteStatus?(Object(r["f"])(),Object(r["c"])("p",i,"Delete successfully")):Object(r["d"])("",!0),!0===n.patchStatus?(Object(r["f"])(),Object(r["c"])("p",s,"Patch successfully")):Object(r["d"])("",!0),!0===n.errorStatus?(Object(r["f"])(),Object(r["c"])("p",u,"Error occured")):Object(r["d"])("",!0),!0===o.deleteVisual?(Object(r["f"])(),Object(r["c"])("p",l,"Deleting task...")):Object(r["d"])("",!0),!0===o.patchVisual?(Object(r["f"])(),Object(r["c"])("p",d,"Patching task...")):Object(r["d"])("",!0),Object(r["e"])("table",{class:o.enableModify},[p,(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["i"])(n.tasks,(function(e,n){return Object(r["f"])(),Object(r["c"])("tr",{key:n,onClick:function(t){return c.tripleClick(e,n)}},[Object(r["e"])("td",null,[o.enableModify===n?Object(r["n"])((Object(r["f"])(),Object(r["c"])("input",{key:0,type:"text","onUpdate:modelValue":function(t){return e.title=t},onClick:t[1]||(t[1]=Object(r["o"])((function(){}),["stop"]))},null,8,["onUpdate:modelValue"])),[[r["m"],e.title]]):Object(r["d"])("",!0),o.enableModify===n?(Object(r["f"])(),Object(r["c"])("button",{key:1,onClick:function(t){return c.comfirmModify(e,n)}},"Confirm",8,["onClick"])):Object(r["d"])("",!0),Object(r["e"])("p",null,Object(r["k"])(e.title),1)]),Object(r["e"])("td",null,[o.enableModify===n?Object(r["n"])((Object(r["f"])(),Object(r["c"])("input",{key:0,type:"text","onUpdate:modelValue":function(t){return e.description=t},onClick:t[2]||(t[2]=Object(r["o"])((function(){}),["stop"]))},null,8,["onUpdate:modelValue"])),[[r["m"],e.description]]):Object(r["d"])("",!0),Object(r["e"])("p",null,Object(r["k"])(e.description),1)]),Object(r["e"])("td",null,[o.enableModify===n?Object(r["n"])((Object(r["f"])(),Object(r["c"])("input",{key:0,type:"datetime-local","onUpdate:modelValue":function(t){return e.deadline=t},onClick:t[3]||(t[3]=Object(r["o"])((function(){}),["stop"]))},null,8,["onUpdate:modelValue"])),[[r["m"],e.deadline]]):Object(r["d"])("",!0),Object(r["e"])("p",null,Object(r["k"])(e.deadline),1)]),Object(r["e"])("td",null,[o.enableModify===n?Object(r["n"])((Object(r["f"])(),Object(r["c"])("select",{key:0,name:"completed",id:"completed","onUpdate:modelValue":function(t){return e.completed=t}},[b,f],8,["onUpdate:modelValue"])),[[r["l"],e.completed]]):Object(r["d"])("",!0),o.enableModify===n?(Object(r["f"])(),Object(r["c"])("button",{key:1,onClick:function(t){return c.deleteTask(e,n)}},"Delete task",8,["onClick"])):Object(r["d"])("",!0),Object(r["e"])("p",null,Object(r["k"])(e.completed),1)])],8,["onClick"])})),128))],2)])})),O=(n("a15b"),n("ac1f"),n("1276"),{emits:["delete:task","patch:task"],props:{url:String,tasks:Array,userLogin:Boolean,deleteStatus:Boolean,patchStatus:Boolean,errorStatus:Boolean},data:function(){return{count:0,timer:null,date:"",time:"",deleteVisual:!1,patchVisual:!1,enableModify:-1}},watch:{patchStatus:function(e){!0===e&&(this.enableModify=-1,this.patchVisual=!1)},deleteStatus:function(e){!0===e&&(this.enableModify=-1,this.deleteVisual=!1)}},methods:{tripleClick:function(e,t){var n=this;!1!==this.userLogin&&(this.count=this.count+1,1===this.count?this.timer=setTimeout((function(){n.count=0,clearTimeout(n.timer)}),500):(3===this.count&&(this.enableModify=t),e.deadline=new Date(e.deadline).toISOString()))},deleteTask:function(e,t){this.$emit("delete:task",{task:e,index:t}),this.deleteVisual=!0},comfirmModify:function(e,t){e.deadline.length<19&&(e.deadline=e.deadline.split("T").join(" ")+":00"),this.patchVisual=!0,this.$emit("patch:task",{task:e,index:t})}}});n("9635");O.render=j,O.__scopeId="data-v-4a1fe7d2";var m=O,h=Object(r["e"])("label",{for:"title"},"Title",-1),k=Object(r["e"])("label",{for:"description"},"Description",-1),g=Object(r["e"])("label",{for:"deadlineDate"},"Date",-1),v=Object(r["e"])("label",{for:"completed"},"Completed",-1),y=Object(r["e"])("option",{value:"N",selected:""},"no",-1),w=Object(r["e"])("option",{value:"y"},"yes",-1),S=Object(r["e"])("div",null,[Object(r["e"])("button",{type:"submit"},"Create task")],-1);function x(e,t,n,a,o,c){return Object(r["f"])(),Object(r["c"])("div",null,[n.userLogin?(Object(r["f"])(),Object(r["c"])("form",{key:0,onSubmit:t[5]||(t[5]=Object(r["o"])((function(){return c.onSubmit&&c.onSubmit.apply(c,arguments)}),["prevent"]))},[Object(r["e"])("div",null,[h,Object(r["n"])(Object(r["e"])("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.userTitle=e}),required:""},null,512),[[r["m"],o.userTitle]])]),Object(r["e"])("div",null,[k,Object(r["n"])(Object(r["e"])("input",{type:"text",name:"description",id:"description","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.userDescription=e})},null,512),[[r["m"],o.userDescription]])]),Object(r["e"])("div",null,[g,Object(r["n"])(Object(r["e"])("input",{type:"datetime-local",name:"deadlineDate",id:"deadlineDate","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.userDeadlineDate=e})},null,512),[[r["m"],o.userDeadlineDate]])]),Object(r["e"])("div",null,[v,Object(r["n"])(Object(r["e"])("select",{name:"completed",id:"completed","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.userCompleted=e})},[y,w],512),[[r["l"],o.userCompleted]])]),S],32)):Object(r["d"])("",!0)])}var T={emits:["add:task"],props:{url:String,userLogin:Boolean,jwt:String},data:function(){return{userTitle:"",userDescription:"",userDeadlineDate:"",userCompleted:""}},computed:{task:function(){var e={};return e.title=this.userTitle,this.userDescription&&(e.description=this.userDescription),this.userDeadlineDate&&(e.deadline=this.userDeadlineDate.split("T").join(" ")+":00"),this.userCompleted&&(e.completed=this.userCompleted),e}},methods:{onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:e.jwt},body:JSON.stringify(e.task)});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,console.log(r),e.$emit("add:task",r),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.err(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}};T.render=x;var C=T,D={key:0},L={class:"hello"},U=Object(r["e"])("label",{for:"username"},"Username",-1),V=Object(r["e"])("label",{for:"password"},"Password",-1),M=Object(r["e"])("div",null,[Object(r["e"])("button",{type:"submit"},"Login")],-1);function P(e,t,n,a,o,c){return Object(r["f"])(),Object(r["c"])("div",null,[o.loginUsername.length>0?(Object(r["f"])(),Object(r["c"])("div",D,[Object(r["e"])("p",L,"Hello "+Object(r["k"])(o.loginUsername),1),Object(r["e"])("button",{class:"logout",onClick:t[1]||(t[1]=function(){return c.logout&&c.logout.apply(c,arguments)})},"Logout")])):(Object(r["f"])(),Object(r["c"])("form",{key:1,onSubmit:t[4]||(t[4]=Object(r["o"])((function(){return c.onSubmit&&c.onSubmit.apply(c,arguments)}),["prevent"]))},[Object(r["e"])("div",null,[U,Object(r["n"])(Object(r["e"])("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.username=e})},null,512),[[r["m"],o.username]])]),Object(r["e"])("div",null,[V,Object(r["n"])(Object(r["e"])("input",{type:"text",name:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.password=e})},null,512),[[r["m"],o.password]])]),M],32))])}n("99af");var R={emits:["login","setJwt"],props:{url:String},data:function(){return{username:"",password:"",loginUsername:""}},created:function(){this.loginOnLoad()},methods:{setCookie:function(e){var t=new Date;t.setTime(t.getTime()+864e5);var n="expires="+t.toUTCString();document.cookie="auth=".concat(e,";").concat(n,";path=/"),this.jwt=e},onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.url+"/user/login",{method:"POST",header:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,r.data.jwt&&(e.setCookie(r.data.jwt),e.loginUsername=r.data.username,e.$emit("login",!0)),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0);case 13:e.username="",e.password="";case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},loginOnLoad:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.cookie,r=n.split("auth=")[1],t.prev=2,t.next=5,fetch(e.url+"/user/confirm",{method:"GET",headers:{Authorization:"".concat(r)}});case 5:return a=t.sent,t.next=8,a.json();case 8:o=t.sent,o.success&&(e.loginUsername=o.data.authentication.username,e.$emit("login",!0),e.$emit("setJwt",r)),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.$emit("login",!1);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},logout:function(){document.cookie="auth=;expires=1;path=/",this.loginUsername="",this.$emit("login",!1)}}};n("9f3e");R.render=P;var J=R,A={name:"App",components:{TaskTable:m,TaskForm:C,LoginForm:J},data:function(){return{url:"https://api.taskapi.tk",userLogin:!1,tasks:[],deleteStatus:!1,patchStatus:!1,errorStatus:!1,jwt:""}},created:function(){this.getTasks()},methods:{setLogin:function(e){this.userLogin=e},setJwt:function(e){this.jwt=e},addTask:function(e){this.tasks.push(e.data.task)},deleteTask:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.deleteStatus=!1,r=e.task,a=e.index,n.next=5,fetch(t.url+"/"+r.id,{method:"DELETE",headers:{Authorization:t.jwt}});case 5:return o=n.sent,n.next=8,o.json();case 8:c=n.sent,200===c.statusCode?(t.deleteStatus=!0,t.tasks=t.tasks.filter((function(e,n){return t.tasks[n]!==t.tasks[a]}))):t.errorStatus=!0;case 10:case"end":return n.stop()}}),n)})))()},patchTask:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.errorStatus=!1,r=e.task,n.next=4,fetch(t.url+"/"+r.id,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t.jwt},body:JSON.stringify(r)});case 4:return a=n.sent,n.next=7,a.json();case 7:o=n.sent,200===o.statusCode?t.patchStatus=!0:t.errorStatus=!0;case 9:case"end":return n.stop()}}),n)})))()},getTasks:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.url);case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,e.tasks=r.data,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}};n("5ce0");A.render=a;var $=A,_=Object(r["b"])($);_.mount("#app")},"5ce0":function(e,t,n){"use strict";n("51fd")},9635:function(e,t,n){"use strict";n("0485")},"9f3e":function(e,t,n){"use strict";n("16be")}});
//# sourceMappingURL=app.d5deb122.js.map